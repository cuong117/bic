{"2c5f6f4e0f7bbcfa566fbc91ee57baf8dd7a371a":{"changes":{"src\/main\/java\/com\/fasterxml\/jackson\/dataformat\/xml\/ser\/XmlSerializerProvider.java":"MODIFY","src\/test\/java\/com\/fasterxml\/jackson\/dataformat\/xml\/misc\/RootNameTest.java":"ADD","release-notes\/VERSION":"MODIFY","src\/test\/java\/com\/fasterxml\/jackson\/dataformat\/xml\/ser\/TestSerialization.java":"MODIFY"},"diff":{"src\/main\/java\/com\/fasterxml\/jackson\/dataformat\/xml\/ser\/XmlSerializerProvider.java":[{"add":["201","        \/\/ 14-Nov-2016, tatu: As per [dataformat-xml#213], we may have explicitly","202","        \/\/    configured root name...","203","        QName rootName = _rootNameFromConfig();","204","        if (rootName == null) {","205","            rootName = ROOT_NAME_FOR_NULL;","206","        }","207","        if (jgen instanceof ToXmlGenerator) {","208","            _initWithRootName((ToXmlGenerator) jgen, rootName);","209","        }","234","        \/* [dataformat-xml#26] If we just try writing root element with namespace,"],"delete":["201","        if (jgen instanceof ToXmlGenerator)","202","        _initWithRootName((ToXmlGenerator) jgen, ROOT_NAME_FOR_NULL);","227","        \/* [Issue#26] If we just try writing root element with namespace,"]}],"src\/test\/java\/com\/fasterxml\/jackson\/dataformat\/xml\/misc\/RootNameTest.java":[{"add":[],"delete":[]}],"release-notes\/VERSION":[{"add":["10","#213: `XmlSerializerProvider` does not use `withRootName` config for null","11"," (reported by gitlabbtr@github)"],"delete":[]}],"src\/test\/java\/com\/fasterxml\/jackson\/dataformat\/xml\/ser\/TestSerialization.java":[{"add":["51","","89","    protected XmlMapper _xmlMapper = new XmlMapper();","105","    ","106","    public void testSimpleAttrAndElem() throws IOException","107","    {","108","        String xml = _xmlMapper.writeValueAsString(new AttrAndElem());","109","        xml = removeSjsxpNamespace(xml);","110","        assertEquals(\"<AttrAndElem id=\\\"42\\\"><elem>whatever<\/elem><\/AttrAndElem>\", xml);","111","    }","169","    \/\/ for [dataformat-xml#41]"],"delete":["13","import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;","18","    \/*","19","    \/**********************************************************","20","    \/* Helper types","21","    \/**********************************************************","22","     *\/","23","","58","    ","65","    @JacksonXmlRootElement(localName=\"root\")","66","    static class RootBean","67","    {","68","        public String value = \"123\";","69","    }","70","","71","    @JacksonXmlRootElement(localName=\"nsRoot\", namespace=\"http:\/\/foo\")","72","    static class NsRootBean","73","    {","74","        public String value = \"abc\";","75","    }","76","","101","    ","102","    \/*","103","    \/**********************************************************","104","    \/* Set up","105","    \/**********************************************************","106","     *\/","108","    protected XmlMapper _xmlMapper;","109","","110","    \/\/ let's actually reuse XmlMapper to make things bit faster","111","    @Override","112","    public void setUp() throws Exception {","113","        super.setUp();","114","        _xmlMapper = new XmlMapper();","115","    }","116","    ","123","    \/\/ Unit test to verify that root name is properly set","124","    public void testRootName() throws IOException","125","    {","126","        String xml = _xmlMapper.writeValueAsString(new StringBean());","127","        ","128","        \/\/ Hmmh. Looks like JDK Stax may adds bogus ns declaration. As such,","129","        \/\/ let's just check that name starts ok...","130","        if (!xml.startsWith(\"<StringBean\")) {","131","            fail(\"Expected root name of 'StringBean'; but XML document is [\"+xml+\"]\");","132","        }","134","        \/\/ and then see that basic non-namespace root is ok","135","        xml = _xmlMapper.writeValueAsString(new RootBean());","136","        assertEquals(\"<root><value>123<\/value><\/root>\", xml);","137","","138","        \/\/ and namespace one too","139","        xml = _xmlMapper.writeValueAsString(new NsRootBean());","140","        if (xml.indexOf(\"nsRoot\") < 0) { \/\/ verify localName","141","            fail(\"Expected root name of 'nsRoot'; but XML document is [\"+xml+\"]\");","142","        }","143","        \/\/ and NS declaration","144","        if (xml.indexOf(\"http:\/\/foo\") < 0) {","145","            fail(\"Expected NS declaration for 'http:\/\/foo', not found, XML document is [\"+xml+\"]\");","146","        }","147","    }","148","    ","156","    public void testSimpleAttrAndElem() throws IOException","157","    {","158","        String xml = _xmlMapper.writeValueAsString(new AttrAndElem());","159","        xml = removeSjsxpNamespace(xml);","160","        assertEquals(\"<AttrAndElem id=\\\"42\\\"><elem>whatever<\/elem><\/AttrAndElem>\", xml);","161","    }","162","","227","    \/\/ for [Issue#41]"]}]}}}